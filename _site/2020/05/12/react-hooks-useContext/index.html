<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>React Hooks useContext</title>
    <meta name="description" content="React Hooks api를 숙달하면 직장에서 사용하는 데 더 도움이 될 것이며 React에 대한 숙달은 당신을 더 높은 수준으로 이끌 것입니다. 이 시리즈는 초보자와 리뷰어에게 매우 쉬운 많은 예제 코드와 효과 데모를 사용합니다.오늘 우리는 Context 객체와 useConte...">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://localhost:4000/2020/05/12/react-hooks-useContext/">
    <link rel="alternate" type="application/rss+xml" title="Centrarium" href="http://localhost:4000/feed.xml ">


    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?cf8506e0ef223e57ff6239944e5d46a4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    <script>
    // google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-72449510-4', 'auto');
      ga('send', 'pageview');

    </script>



</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">Centrarium</a>
        <small>Front-end Dev Engineer</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/demo/">
                        
                            <i class="fa fa-play"></i>Demo
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>React Hooks useContext</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2020-05-12
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>KSI
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#JavaScript" title="Category: JavaScript" rel="category">JavaScript</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#React" title="Tag: React" rel="tag">React</a-->
        <a href="/tag/#React" title="Tag: React" rel="tag">React</a>&nbsp;
    
        <!--a href="/tag/#hooks" title="Tag: hooks" rel="tag">hooks</a-->
        <a href="/tag/#hooks" title="Tag: hooks" rel="tag">hooks</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#context-api-란" id="markdown-toc-context-api-란">Context Api 란?</a></li>
  <li><a href="#컨텍스트-사용" id="markdown-toc-컨텍스트-사용">컨텍스트 사용</a>    <ul>
      <li><a href="#컨텍스트-만들기" id="markdown-toc-컨텍스트-만들기">컨텍스트 만들기</a></li>
      <li><a href="#provider-제공" id="markdown-toc-provider-제공">Provider 제공</a></li>
      <li><a href="#사용-된-노드에서-context-사용" id="markdown-toc-사용-된-노드에서-context-사용">사용 된 노드에서 Context 사용</a></li>
      <li><a href="#여러-context-싱허ㅣㅇ" id="markdown-toc-여러-context-싱허ㅣㅇ">여러 Context 싱허ㅣㅇ</a></li>
    </ul>
  </li>
  <li><a href="#usecontext" id="markdown-toc-usecontext">useContext</a></li>
</ul>

<p>React Hooks api를 숙달하면 직장에서 사용하는 데 더 도움이 될 것이며 React에 대한 숙달은 당신을 더 높은 수준으로 이끌 것입니다. 이 시리즈는 초보자와 리뷰어에게 매우 쉬운 많은 예제 코드와 효과 데모를 사용합니다.</p>

<p>오늘 우리는 Context 객체와 useContext의 사용에 대해 이야기합니다.</p>

<h2 id="context-api-란">Context Api 란?</h2>

<p>구성 요소 트리 구조가 다음과 같고 이제 루트 노드에서 리프 노드 ADF로 userName 속성을 전달하여 props를 통해 전달하려는 경우 이러한 구성 요소가 userName 속성을 사용하지 않더라도 불가피하게 BCE를 통과하게됩니다. .
<img src="https://gw.alicdn.com/tfs/TB1Nl38AAT2gK0jSZFkXXcIQFXa-1432-870.png" alt="" /></p>

<p>이러한 중첩 된 트리 구조에 5 개 또는 10 개의 레이어가 있으면 치명적인 개발 및 유지 관리 경험이 될 것입니다. 이 문제는 중간 노드를 거치지 않고 원하는 곳에 직접 도달 할 수 있다면 피할 수 있으며, 이때 Context api는이 문제를 해결하는 것입니다.</p>

<p>컨텍스트 API는 모든 계층을 거치지 않고 구성 요소 트리의 데이터를 전달하는 API입니다. Context Hook의 사용을 살펴 보겠습니다.</p>

<h2 id="컨텍스트-사용">컨텍스트 사용</h2>

<p>예를 들어 루트 노드에서 F 노드로 변수 사용자 이름을 전달하는 가장 오른쪽 분기 인 CEF에 중점을 둡니다.</p>

<p>먼저 다음과 같이 App, ComponentC, ComponentE, ComponentF를 만듭니다.</p>

<p>App.js</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="dl">'</span><span class="s1">./App.css</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">ComponentC</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/16ComponentC</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"App"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">ComponentC</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span>
</code></pre></div></div>

<p>ComponentC.js</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">ComponentE</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./16ComponentE</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">ComponentC</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">ComponentE</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComponentC</span>

</code></pre></div></div>

<p>ComponentE.js</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">ComponentF</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./16ComponentF</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">ComponentE</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">ComponentF</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComponentE</span>

</code></pre></div></div>

<p>ComponentF.js</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">ComponentF</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="nx">ComponentF</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComponentF</span>
</code></pre></div></div>

<p>페이지는 다음과 같이 표시됩니다.</p>

<p><img src="https://gw.alicdn.com/tfs/TB1_nrMFkL0gK0jSZFAXXcA9pXa-438-193.png" alt="" /></p>

<p>다음으로 Context를 사용하여 App에서 ComponentF로 사용자 이름을 전달하는 방법을 살펴 보겠습니다. 다음 3 단계로 나뉩니다.</p>

<h3 id="컨텍스트-만들기">컨텍스트 만들기</h3>

<p>루트 노드 App.js 中使用 <code class="language-plaintext highlighter-rouge">createContext()</code> 를 사용하여 컨텍스트 만들기</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">UserContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p>Context 개체를 만듭니다. React가이 Context 객체를 구독하는 컴포넌트를 렌더링 할 때,이 컴포넌트는 컴포넌트 트리에서 자신에게 가장 가까운 일치하는 Provider로부터 현재 컨텍스트 값을 읽습니다.</p>

  <p>defaultValue 매개 변수는 구성 요소가있는 트리에 일치하는 공급자가없는 경우에만 적용됩니다. 이렇게하면 Provider를 사용하여 구성 요소를 래핑하지 않고도 구성 요소를 테스트 할 수 있습니다. 참고 : undefined가 Provider 값에 전달되면 소비자 구성 요소의 defaultValue가 적용되지 않습니다.</p>
</blockquote>

<h3 id="provider-제공">Provider 제공</h3>

<p>Provider를 사용하여 루트 노드에서 자식 노드를 래핑하고 자식 노드에 컨텍스트를 제공합니다.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">UserContext</span><span class="p">.</span><span class="nx">Provider</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="dl">'</span><span class="s1">chuanshi</span><span class="dl">'</span><span class="p">}</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">ComponentC</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="sr">/UserContext.Provider</span><span class="err">&gt;
</span></code></pre></div></div>

<blockquote>
  <p>각 Context 객체는 Provider React 구성 요소를 반환하므로 소비 구성 요소가 컨텍스트 변경 사항을 구독 할 수 있습니다.
value소비자 어셈블리에 전달 된 속성을 받는 공급자 입니다. 공급자는 여러 소비자 구성 요소에 해당 할 수 있습니다. 여러 공급자를 중첩 할 수도 있으며 내부 공급자가 외부 데이터를 덮습니다.
Provider의 value값이 변경되면 모든 구성 요소의 내부 소비가 다시 렌더링됩니다. 공급자 및 내부 구성 요소에는 소비자 shouldComponentUpdate기능이 적용되지 않으므로 상위 구성 요소 의 소비자 구성 요소가 업데이트되면 업데이트 할 수도 있습니다.
새 값과 이전 값 감지는 Object.is와 동일한 알고리즘을 사용하여 변경을 결정하는 데 사용됩니다.</p>
</blockquote>

<p>하위 노드에 도입 될 수 있도록 이전에 정의 된 컨텍스트를 내보내는 것을 잊지 마십시오.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">UserContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
</code></pre></div></div>

<p>현재 App.js의 전체 코드는 다음과 같습니다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="dl">'</span><span class="s1">./App.css</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">ComponentC</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/16ComponentC</span><span class="dl">'</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"App"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="dl">'</span><span class="s1">chuanshi</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ComponentC</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span>
</code></pre></div></div>

<h3 id="사용-된-노드에서-context-사용">사용 된 노드에서 Context 사용</h3>

<p>import context 对象</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">UserContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../App</span><span class="dl">'</span>
</code></pre></div></div>

<p>소비를 위해 Consumer 사용</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">UserContext</span><span class="p">.</span><span class="nx">Consumer</span><span class="o">&gt;</span>
  <span class="p">{</span>
    <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="nx">User</span> <span class="nx">context</span> <span class="nx">value</span> <span class="p">{</span><span class="nx">user</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/UserContext.Consumer</span><span class="err">&gt;
</span></code></pre></div></div>

<blockquote>
  <p>여기서 React 컴포넌트는 컨텍스트 변경을 구독 할 수도 있습니다. 이를 통해 기능 구성 요소의 컨텍스트를 구독 할 수 있습니다.</p>
</blockquote>

<blockquote>
  <p>이를 위해서는 어린 시절의 기능 연습이 필요합니다. 이 함수는 현재 컨텍스트 값을 받고 React 노드를 반환합니다. 함수에 전달 된 값은 위쪽 구성 요소 트리에서 컨텍스트에 가장 가까운 공급자가 제공 한 값과 동일합니다. 해당 Provider가없는 경우 value 매개 변수는 createContext ()에 전달 된 defaultValue와 동일합니다.</p>
</blockquote>

<p>전체 ComponentF.js 코드는 다음과 같습니다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">UserContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../App</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">ComponentF</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Consumer</span><span class="p">&gt;</span>
        <span class="si">{</span>
          <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              User context value <span class="si">{</span><span class="nx">user</span><span class="si">}</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">)</span>
        <span class="si">}</span>
      <span class="p">&lt;/</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Consumer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComponentF</span>
</code></pre></div></div>

<p>효과는 다음과 같습니다.</p>

<p><img src="https://gw.alicdn.com/tfs/TB1CSB6FpT7gK0jSZFpXXaTkpXa-448-210.png" alt="" /></p>

<p>현재 Context가 1 개만 있으면 상황은 괜찮습니다. 여러 Context가있는 상황을 살펴 보겠습니다.</p>

<h3 id="여러-context-싱허ㅣㅇ">여러 Context 싱허ㅣㅇ</h3>

<p>App.js에 다른 컨텍스트를 추가합니다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="dl">'</span><span class="s1">./App.css</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">ComponentC</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/16ComponentC</span><span class="dl">'</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">ChannelContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"App"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="dl">'</span><span class="s1">chuanshi</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ChannelContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="dl">'</span><span class="s1">code volution</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">ComponentC</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nc">ChannelContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span>
</code></pre></div></div>

<p>다음으로 component F에서</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">UserContext</span><span class="p">,</span> <span class="nx">ChannelContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../App</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">ComponentF</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Consumer</span><span class="p">&gt;</span>
        <span class="si">{</span>
          <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="p">&lt;</span><span class="nc">ChannelContext</span><span class="p">.</span><span class="nc">Consumer</span><span class="p">&gt;</span>
              <span class="si">{</span>
                <span class="p">(</span><span class="nx">channel</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
                  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                    User context value <span class="si">{</span><span class="nx">user</span><span class="si">}</span>, channel value <span class="si">{</span><span class="nx">channel</span><span class="si">}</span>
                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">)</span>
              <span class="si">}</span>
            <span class="p">&lt;/</span><span class="nc">ChannelContext</span><span class="p">.</span><span class="nc">Consumer</span><span class="p">&gt;</span>

          <span class="p">)</span>
        <span class="si">}</span>
      <span class="p">&lt;/</span><span class="nc">UserContext</span><span class="p">.</span><span class="nc">Consumer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComponentF</span>
</code></pre></div></div>

<p>페이지는 다음과 같이 표시됩니다.</p>

<p><img src="https://gw.alicdn.com/tfs/TB1XC47Fvb2gK0jSZK9XXaEgFXa-453-183.png" alt="" /></p>

<p>코드는 문제없이 실행되지만 미학과 가독성은 그리 좋지 않습니다. 여러 Context를 사용하면 Context hook을 사용하여 여러 Context를 소비하는 코드의 우아한 문제를 해결하는 더 좋은 방법이 있습니다.</p>

<h2 id="usecontext">useContext</h2>

<p>예를 들어, 위 데모의 컴포넌트 E useContext는 루트 노드를 사용하여 생성 된 Context 에 의한 것 입니다. 다음 단계로 나뉩니다.</p>

<ol>
  <li>반응 객체 useContext에서이 후크 API 가져 오기</li>
  <li>루트 노드에 의해 생성 된 컨텍스트 개체를 가져옵니다 (여러 개를 가져올 수 있음).</li>
  <li>실행 useContext()방법, 들어오는 컨텍스트</li>
</ol>

<p>ComponentE 전체 코드 :</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">import</span> <span class="nx">ComponentF</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./16ComponentF</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">UserContext</span><span class="p">,</span> <span class="nx">ChannelContext</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../App</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nx">ComponentE</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">UserContext</span><span class="p">)</span>
  <span class="kd">const</span> <span class="nx">channel</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ChannelContext</span><span class="p">)</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">ComponentF</span> <span class="p">/&gt;</span>
      --- <span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
      <span class="si">{</span><span class="nx">user</span><span class="si">}</span> - <span class="si">{</span><span class="nx">channel</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ComponentE</span>
</code></pre></div></div>

<p>페이지는 다음과 같이 표시됩니다.</p>

<p><img src="https://gw.alicdn.com/tfs/TB1NnVuFUT1gK0jSZFhXXaAtVXa-453-224.png" alt="" /></p>

<p>코드의 핵심 라인은 다음과 같습니다.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">MyContext</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p>useContext 메서드는 컨텍스트 객체 ( React.createContext반환 값)를 받고 컨텍스트의 현재 값을 반환합니다. 가까운 전류 성분으로부터 상기 상부 어셈블리의 현재 컨텍스트 값 소품 결정.<MyContext.Provider>value</MyContext.Provider></p>

  <MyContext.Provider>후크에 대한 상위 어셈블리의 최근 업데이트가 다시 렌더링을 트리거하고 값 의 MyContext컨텍스트 공급자에 전달 된 최신을 사용합니다 value. 사용하더라도 조상 React.memo또는 shouldComponentUpdate자체가 구성 요소의 사용 useContext시간을 렌더링 다시.

그것은로 이해 될 수 useContext(MyContext)클래스 구성 요소들에 대응 static contextType = MyContext하거나 <MyContext.Consumer>.

useContext(MyContext)컨텍스트의 값을 읽고 컨텍스트의 변경 사항을 구독 할 수 있습니다. <MyContext.Provider>기본 구성 요소에 대한 컨텍스트를 제공 하려면 상위 구성 요소 트리를 사용해야합니다 .
</MyContext.Provider></MyContext.Consumer></MyContext.Provider>
</blockquote>

<p>지금까지 useContext 후크 api의 사용을 마스터했으며 useContext가 여러 컨텍스트에서 사용하는 코드의 복잡성을 크게 줄일 수 있음을 알 수 있습니다.</p>

        </article>
        <hr>

        
        
            
            
                
                    
                        
                        <h2 id="similar_posts">Similar Posts</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="/2021/01/22/react-awesome-components/">awesome-react-components
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/01/21/react-redux/">React redux
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/01/21/react-microsoft-login/">React Microsoft login
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/01/21/react-kakao-login/">React Kakao login
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/01/21/react-google-login/">React Google login
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/01/21/react-facebook-login/">React Facebook login
                            
                            </a>
                        </li>
                        
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>上一篇</strong> <a href="/2020/05/11/react-hooks-useEffect/">React Hooks useEffect</a></p>
        
    </div>
    <div class="nex">

        
        <p><strong>下一篇</strong> <a href="/2020/05/13/react-hooks-useReducer/">React Hooks useReducer</a></p>
        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        


<div id="disqus_thread"></div>
<script>
    /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function() {
        this.page.url = 'http://localhost:4000/2020/05/12/react-hooks-useContext/'; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://localhost:4000/2020/05/12/react-hooks-useContext/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
            s = d.createElement('script');

        s.src = '//kimsoonil.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
            
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/kimsoonil" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:rlatnsdlf158@naver.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>        
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
